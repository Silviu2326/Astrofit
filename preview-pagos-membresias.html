<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vista Previa - Gestión de Pagos de Membresías</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Framer Motion -->
    <script src="https://unpkg.com/framer-motion@12.23.22/dist/framer-motion.js"></script>
    
    <!-- React y React DOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel para JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide React Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- React Hot Toast -->
    <script src="https://unpkg.com/react-hot-toast@2.6.0/dist/index.umd.js"></script>
    
    <style>
        /* Estilos personalizados */
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .5;
            }
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        
        .backdrop-blur-xl {
            backdrop-filter: blur(24px);
        }
        
        .backdrop-blur-sm {
            backdrop-filter: blur(4px);
        }
        
        .bg-clip-text {
            -webkit-background-clip: text;
            background-clip: text;
        }
        
        .text-transparent {
            color: transparent;
        }
        
        /* Estilos para el toast */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
        }
        
        .toast {
            background: #1e293b;
            color: white;
            padding: 12px 16px;
            border-radius: 12px;
            margin-bottom: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 300px;
            animation: slideIn 0.3s ease-out;
        }
        
        .toast.success {
            border-left: 4px solid #10b981;
        }
        
        .toast.error {
            border-left: 4px solid #ef4444;
        }
        
        .toast.loading {
            border-left: 4px solid #f59e0b;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Modal styles */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px;
        }
        
        .modal-content {
            background: white;
            border-radius: 16px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            max-width: 90vw;
            max-height: 90vh;
            overflow: hidden;
            animation: modalIn 0.3s ease-out;
        }
        
        @keyframes modalIn {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        
        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 24px;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .modal-body {
            padding: 24px;
            overflow-y: auto;
            max-height: calc(90vh - 120px);
        }
        
        /* Shimmer effect */
        .shimmer {
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: translateX(-100%);
            transition: transform 1s;
        }
        
        .shimmer:hover {
            transform: translateX(100%);
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>
    
    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        const { motion, AnimatePresence } = Motion;
        const { createRoot } = ReactDOM;
        const { Toaster, toast } = ReactHotToast;
        
        // Iconos de Lucide
        const {
            CreditCard, DollarSign, TrendingUp, Calendar, CheckCircle, Clock, AlertCircle,
            Download, Filter, Eye, MoreVertical, RefreshCw, Trash2, Send, X
        } = lucide;
        
        // Componente Modal
        const Modal = ({ isOpen, onClose, title, children, size = 'md' }) => {
            const sizeClasses = {
                sm: 'max-w-md',
                md: 'max-w-lg',
                lg: 'max-w-2xl',
                xl: 'max-w-4xl'
            };
            
            if (!isOpen) return null;
            
            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div 
                        className={`modal-content ${sizeClasses[size]}`}
                        onClick={(e) => e.stopPropagation()}
                    >
                        <div className="modal-header">
                            <h2 className="text-xl font-semibold text-gray-900">{title}</h2>
                            <button
                                onClick={onClose}
                                className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
                            >
                                <X className="w-5 h-5 text-gray-500" />
                            </button>
                        </div>
                        <div className="modal-body">
                            {children}
                        </div>
                    </div>
                </div>
            );
        };
        
        // Componente ConfirmationModal
        const ConfirmationModal = ({
            isOpen,
            onClose,
            onConfirm,
            title,
            message,
            confirmText = 'Confirmar',
            cancelText = 'Cancelar',
            type = 'danger',
            isLoading = false
        }) => {
            const getTypeStyles = () => {
                switch (type) {
                    case 'danger':
                        return {
                            icon: <AlertCircle className="w-8 h-8 text-red-400" />,
                            confirmButton: 'bg-red-500 hover:bg-red-600 text-white',
                            border: 'border-red-500/30',
                        };
                    case 'warning':
                        return {
                            icon: <AlertCircle className="w-8 h-8 text-yellow-400" />,
                            confirmButton: 'bg-yellow-500 hover:bg-yellow-600 text-white',
                            border: 'border-yellow-500/30',
                        };
                    case 'info':
                        return {
                            icon: <AlertCircle className="w-8 h-8 text-blue-400" />,
                            confirmButton: 'bg-blue-500 hover:bg-blue-600 text-white',
                            border: 'border-blue-500/30',
                        };
                }
            };
            
            const styles = getTypeStyles();
            
            if (!isOpen) return null;
            
            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div 
                        className={`modal-content bg-slate-800 border ${styles.border}`}
                        onClick={(e) => e.stopPropagation()}
                    >
                        <div className="modal-header">
                            <div className="flex items-center gap-3">
                                {styles.icon}
                                <h3 className="text-xl font-bold text-white">{title}</h3>
                            </div>
                            <button
                                onClick={onClose}
                                className="text-slate-400 hover:text-white transition-colors"
                                disabled={isLoading}
                            >
                                <X className="w-6 h-6" />
                            </button>
                        </div>
                        <div className="modal-body">
                            <p className="text-slate-300 mb-8 leading-relaxed">{message}</p>
                            <div className="flex gap-3">
                                <button
                                    onClick={onClose}
                                    disabled={isLoading}
                                    className="flex-1 bg-slate-700 text-white py-3 rounded-xl font-semibold hover:bg-slate-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                                >
                                    {cancelText}
                                </button>
                                <button
                                    onClick={onConfirm}
                                    disabled={isLoading}
                                    className={`flex-1 ${styles.confirmButton} py-3 rounded-xl font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2`}
                                >
                                    {isLoading && (
                                        <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin" />
                                    )}
                                    {confirmText}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };
        
        // Componente principal
        const PagosMembresiPage = () => {
            const [filtroEstado, setFiltroEstado] = useState('todos');
            const [filtroMembresia, setFiltroMembresia] = useState('todos');
            const [modalDetallePago, setModalDetallePago] = useState({ isOpen: false, pago: null });
            const [modalAcciones, setModalAcciones] = useState({ isOpen: false, pago: null });
            const [modalConfirmacion, setModalConfirmacion] = useState({ isOpen: false, action: '', pago: null });
            const [isLoading, setIsLoading] = useState(false);
            
            const pagos = [
                {
                    id: '1',
                    miembro: 'Ana García',
                    email: 'ana@email.com',
                    membresia: 'Premium',
                    monto: 99.99,
                    fecha: '2024-01-15',
                    estado: 'completado',
                    metodo: 'tarjeta'
                },
                {
                    id: '2',
                    miembro: 'Carlos López',
                    email: 'carlos@email.com',
                    membresia: 'Oro',
                    monto: 79.99,
                    fecha: '2024-01-14',
                    estado: 'pendiente',
                    metodo: 'paypal'
                },
                {
                    id: '3',
                    miembro: 'María Rodríguez',
                    email: 'maria@email.com',
                    membresia: 'Plata',
                    monto: 49.99,
                    fecha: '2024-01-13',
                    estado: 'completado',
                    metodo: 'transferencia'
                },
                {
                    id: '4',
                    miembro: 'Juan Pérez',
                    email: 'juan@email.com',
                    membresia: 'Bronce',
                    monto: 29.99,
                    fecha: '2024-01-12',
                    estado: 'fallido',
                    metodo: 'tarjeta'
                },
                {
                    id: '5',
                    miembro: 'Laura Martín',
                    email: 'laura@email.com',
                    membresia: 'Premium',
                    monto: 99.99,
                    fecha: '2024-01-11',
                    estado: 'reembolsado',
                    metodo: 'paypal'
                }
            ];
            
            const getEstadoColor = (estado) => {
                switch (estado) {
                    case 'completado': return 'from-green-500 to-emerald-500';
                    case 'pendiente': return 'from-yellow-500 to-orange-500';
                    case 'fallido': return 'from-red-500 to-pink-500';
                    case 'reembolsado': return 'from-blue-500 to-indigo-500';
                    default: return 'from-gray-500 to-gray-600';
                }
            };
            
            const getEstadoIcon = (estado) => {
                switch (estado) {
                    case 'completado': return <CheckCircle className="w-4 h-4" />;
                    case 'pendiente': return <Clock className="w-4 h-4" />;
                    case 'fallido': return <AlertCircle className="w-4 h-4" />;
                    case 'reembolsado': return <DollarSign className="w-4 h-4" />;
                    default: return <Clock className="w-4 h-4" />;
                }
            };
            
            const getMetodoIcon = (metodo) => {
                switch (metodo) {
                    case 'tarjeta': return <CreditCard className="w-4 h-4" />;
                    case 'paypal': return <DollarSign className="w-4 h-4" />;
                    case 'transferencia': return <TrendingUp className="w-4 h-4" />;
                    default: return <CreditCard className="w-4 h-4" />;
                }
            };
            
            const pagosFiltrados = pagos.filter(pago => {
                const estadoMatch = filtroEstado === 'todos' || pago.estado === filtroEstado;
                const membresiaMatch = filtroMembresia === 'todos' || pago.membresia.toLowerCase() === filtroMembresia;
                return estadoMatch && membresiaMatch;
            });
            
            const estadisticas = {
                totalIngresos: pagos.filter(p => p.estado === 'completado').reduce((sum, p) => sum + p.monto, 0),
                pagosCompletados: pagos.filter(p => p.estado === 'completado').length,
                pagosPendientes: pagos.filter(p => p.estado === 'pendiente').length,
                tasaConversion: 87.5
            };
            
            // Funciones para manejar acciones
            const handleExportar = async () => {
                setIsLoading(true);
                try {
                    // Simular exportación
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    // Crear CSV
                    const csvContent = [
                        ['ID', 'Miembro', 'Email', 'Membresía', 'Monto', 'Fecha', 'Estado', 'Método'],
                        ...pagosFiltrados.map(pago => [
                            pago.id,
                            pago.miembro,
                            pago.email,
                            pago.membresia,
                            pago.monto.toString(),
                            pago.fecha,
                            pago.estado,
                            pago.metodo
                        ])
                    ].map(row => row.join(',')).join('\n');
                    
                    // Descargar archivo
                    const blob = new Blob([csvContent], { type: 'text/csv' });
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `pagos-membresias-${new Date().toISOString().split('T')[0]}.csv`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    window.URL.revokeObjectURL(url);
                    
                    toast.success('Datos exportados exitosamente');
                } catch (error) {
                    toast.error('Error al exportar los datos');
                } finally {
                    setIsLoading(false);
                }
            };
            
            const handleVerDetalle = (pago) => {
                setModalDetallePago({ isOpen: true, pago });
            };
            
            const handleAcciones = (pago) => {
                setModalAcciones({ isOpen: true, pago });
            };
            
            const handleAccionPago = (action, pago) => {
                setModalAcciones({ isOpen: false, pago: null });
                setModalConfirmacion({ isOpen: true, action, pago });
            };
            
            const confirmarAccion = async () => {
                if (!modalConfirmacion.pago) return;
                
                setIsLoading(true);
                try {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    
                    switch (modalConfirmacion.action) {
                        case 'reembolsar':
                            toast.success(`Reembolso procesado para ${modalConfirmacion.pago.miembro}`);
                            break;
                        case 'marcar_pagado':
                            toast.success(`Pago marcado como completado para ${modalConfirmacion.pago.miembro}`);
                            break;
                        case 'reenviar_factura':
                            toast.success(`Factura reenviada a ${modalConfirmacion.pago.email}`);
                            break;
                        case 'eliminar':
                            toast.success(`Pago eliminado exitosamente`);
                            break;
                        default:
                            toast.success('Acción completada exitosamente');
                    }
                } catch (error) {
                    toast.error('Error al procesar la acción');
                } finally {
                    setIsLoading(false);
                    setModalConfirmacion({ isOpen: false, action: '', pago: null });
                }
            };
            
            const getAccionTexto = (action) => {
                switch (action) {
                    case 'reembolsar': return 'Procesar Reembolso';
                    case 'marcar_pagado': return 'Marcar como Pagado';
                    case 'reenviar_factura': return 'Reenviar Factura';
                    case 'eliminar': return 'Eliminar Pago';
                    default: return 'Confirmar Acción';
                }
            };
            
            const getAccionMensaje = (action, pago) => {
                switch (action) {
                    case 'reembolsar': 
                        return `¿Estás seguro de que deseas procesar el reembolso de $${pago.monto.toFixed(2)} para ${pago.miembro}?`;
                    case 'marcar_pagado': 
                        return `¿Marcar el pago de $${pago.monto.toFixed(2)} de ${pago.miembro} como completado?`;
                    case 'reenviar_factura': 
                        return `¿Reenviar la factura a ${pago.email}?`;
                    case 'eliminar': 
                        return `¿Eliminar permanentemente el registro de pago de ${pago.miembro}? Esta acción no se puede deshacer.`;
                    default: 
                        return '¿Confirmar esta acción?';
                }
            };
            
            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-50 via-indigo-50/30 to-purple-50/30 pb-12">
                    {/* Hero Section */}
                    <div className="relative overflow-hidden bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 rounded-3xl shadow-2xl mb-8 p-8 md:p-12">
                        {/* Efectos de fondo animados */}
                        <div className="absolute inset-0 opacity-10">
                            <div className="absolute top-0 left-0 w-72 h-72 bg-white rounded-full blur-3xl animate-pulse"></div>
                            <div className="absolute bottom-0 right-0 w-96 h-96 bg-white rounded-full blur-3xl animate-pulse" style={{ animationDelay: '1s' }}></div>
                        </div>
                        
                        {/* Grid pattern */}
                        <div className="absolute inset-0 opacity-5">
                            <div className="absolute inset-0" style={{
                                backgroundImage: `linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
                                                 linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)`,
                                backgroundSize: '50px 50px'
                            }}></div>
                        </div>
                        
                        <div className="relative z-10">
                            {/* Título con icono animado */}
                            <div className="flex items-center gap-3 mb-4">
                                <div className="relative">
                                    <DollarSign className="w-10 h-10 text-yellow-300 animate-pulse" />
                                    <div className="absolute inset-0 w-10 h-10 bg-yellow-300 rounded-full blur-lg opacity-50"></div>
                                </div>
                                <h1 className="text-4xl md:text-6xl font-bold text-white tracking-tight">
                                    Gestión de <span className="bg-clip-text text-transparent bg-gradient-to-r from-yellow-200 to-yellow-400">Pagos</span>
                                </h1>
                            </div>
                            
                            {/* Descripción */}
                            <p className="text-xl md:text-2xl text-blue-100 max-w-3xl leading-relaxed">
                                Supervisa y administra todos los <span className="font-bold text-white px-2 py-1 bg-white/20 rounded-lg backdrop-blur-sm">pagos de membresías</span> en tiempo real
                            </p>
                        </div>
                    </div>
                    
                    <div className="container mx-auto px-4">
                        {/* Estadísticas */}
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            <div className="bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 p-6 border border-white/50 relative overflow-hidden group">
                                <div className="relative z-10">
                                    <div className="w-16 h-16 rounded-2xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center text-white mb-4 shadow-xl group-hover:scale-110 transition-transform duration-300">
                                        <DollarSign className="w-8 h-8" />
                                    </div>
                                    <p className="text-sm font-semibold text-gray-600 mb-2 tracking-wide uppercase">Ingresos Totales</p>
                                    <p className="text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-700">
                                        ${estadisticas.totalIngresos.toFixed(2)}
                                    </p>
                                </div>
                            </div>
                            
                            <div className="bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 p-6 border border-white/50 relative overflow-hidden group">
                                <div className="relative z-10">
                                    <div className="w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white mb-4 shadow-xl group-hover:scale-110 transition-transform duration-300">
                                        <CheckCircle className="w-8 h-8" />
                                    </div>
                                    <p className="text-sm font-semibold text-gray-600 mb-2 tracking-wide uppercase">Completados</p>
                                    <p className="text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-700">
                                        {estadisticas.pagosCompletados}
                                    </p>
                                </div>
                            </div>
                            
                            <div className="bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 p-6 border border-white/50 relative overflow-hidden group">
                                <div className="relative z-10">
                                    <div className="w-16 h-16 rounded-2xl bg-gradient-to-br from-yellow-500 to-orange-600 flex items-center justify-center text-white mb-4 shadow-xl group-hover:scale-110 transition-transform duration-300">
                                        <Clock className="w-8 h-8" />
                                    </div>
                                    <p className="text-sm font-semibold text-gray-600 mb-2 tracking-wide uppercase">Pendientes</p>
                                    <p className="text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-700">
                                        {estadisticas.pagosPendientes}
                                    </p>
                                </div>
                            </div>
                            
                            <div className="bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 p-6 border border-white/50 relative overflow-hidden group">
                                <div className="relative z-10">
                                    <div className="w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center text-white mb-4 shadow-xl group-hover:scale-110 transition-transform duration-300">
                                        <TrendingUp className="w-8 h-8" />
                                    </div>
                                    <p className="text-sm font-semibold text-gray-600 mb-2 tracking-wide uppercase">Conversión</p>
                                    <p className="text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-700">
                                        {estadisticas.tasaConversion}%
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        {/* Filtros y controles */}
                        <div className="bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl p-6 mb-8 border border-white/50">
                            <div className="flex flex-wrap gap-4 items-center">
                                <div className="flex items-center gap-2">
                                    <Filter className="w-5 h-5 text-gray-600" />
                                    <span className="text-sm font-semibold text-gray-600">Filtros:</span>
                                </div>
                                <select 
                                    value={filtroEstado} 
                                    onChange={(e) => setFiltroEstado(e.target.value)}
                                    className="px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-100 transition-all duration-300 outline-none bg-white/80 backdrop-blur-sm"
                                >
                                    <option value="todos">Todos los estados</option>
                                    <option value="completado">Completado</option>
                                    <option value="pendiente">Pendiente</option>
                                    <option value="fallido">Fallido</option>
                                    <option value="reembolsado">Reembolsado</option>
                                </select>
                                <select 
                                    value={filtroMembresia} 
                                    onChange={(e) => setFiltroMembresia(e.target.value)}
                                    className="px-3 py-2 rounded-xl border-2 border-gray-200 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-100 transition-all duration-300 outline-none bg-white/80 backdrop-blur-sm"
                                >
                                    <option value="todos">Todas las membresías</option>
                                    <option value="bronce">Bronce</option>
                                    <option value="plata">Plata</option>
                                    <option value="oro">Oro</option>
                                    <option value="premium">Premium</option>
                                </select>
                                <button
                                    onClick={handleExportar}
                                    disabled={isLoading}
                                    className="ml-auto px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all duration-300 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
                                >
                                    {isLoading ? (
                                        <RefreshCw className="w-4 h-4 animate-spin" />
                                    ) : (
                                        <Download className="w-4 h-4" />
                                    )}
                                    {isLoading ? 'Exportando...' : 'Exportar'}
                                </button>
                            </div>
                        </div>
                        
                        {/* Lista de Pagos */}
                        <div className="space-y-4">
                            {pagosFiltrados.map((pago, index) => (
                                <div
                                    key={pago.id}
                                    className="bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 p-6 border border-white/50 relative overflow-hidden group"
                                >
                                    {/* Shimmer effect */}
                                    <div className="absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-0 group-hover:opacity-30 transform -skew-x-12 group-hover:translate-x-full transition-all duration-1000"></div>
                                    
                                    {/* Decoración de fondo */}
                                    <div className={`absolute -right-8 -top-8 w-32 h-32 bg-gradient-to-br ${getEstadoColor(pago.estado)} opacity-5 rounded-full blur-2xl`}></div>
                                    
                                    <div className="relative z-10 flex items-center justify-between">
                                        <div className="flex items-center gap-4">
                                            {/* Avatar */}
                                            <div className="w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold shadow-xl group-hover:scale-110 transition-transform duration-300">
                                                {pago.miembro.charAt(0)}
                                            </div>
                                            
                                            {/* Información del pago */}
                                            <div>
                                                <div className="flex items-center gap-3 mb-2">
                                                    <h3 className="text-xl font-bold text-gray-900">{pago.miembro}</h3>
                                                    <div className={`px-3 py-1 bg-gradient-to-r ${getEstadoColor(pago.estado)} text-white text-xs font-bold rounded-full flex items-center gap-1`}>
                                                        {getEstadoIcon(pago.estado)}
                                                        {pago.estado.toUpperCase()}
                                                    </div>
                                                </div>
                                                <p className="text-gray-600 mb-1">{pago.email}</p>
                                                <div className="flex items-center gap-4 text-sm text-gray-500">
                                                    <span className="flex items-center gap-1">
                                                        <Calendar className="w-4 h-4" />
                                                        {pago.fecha}
                                                    </span>
                                                    <span className="flex items-center gap-1">
                                                        {getMetodoIcon(pago.metodo)}
                                                        {pago.metodo}
                                                    </span>
                                                    <span className="font-semibold text-gray-700">{pago.membresia}</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        {/* Monto y acciones */}
                                        <div className="flex items-center gap-4">
                                            <div className="text-right">
                                                <p className="text-2xl font-bold text-gray-900">${pago.monto.toFixed(2)}</p>
                                                <p className="text-sm text-gray-500">USD</p>
                                            </div>
                                            <div className="flex gap-2">
                                                <button
                                                    onClick={() => handleVerDetalle(pago)}
                                                    className="p-2 text-blue-600 hover:bg-blue-50 rounded-xl transition-colors duration-300"
                                                    title="Ver detalles del pago"
                                                >
                                                    <Eye className="w-4 h-4" />
                                                </button>
                                                <button
                                                    onClick={() => handleAcciones(pago)}
                                                    className="p-2 text-gray-600 hover:bg-gray-50 rounded-xl transition-colors duration-300"
                                                    title="Más opciones"
                                                >
                                                    <MoreVertical className="w-4 h-4" />
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                    
                    {/* Modal de Detalle del Pago */}
                    <Modal
                        isOpen={modalDetallePago.isOpen}
                        onClose={() => setModalDetallePago({ isOpen: false, pago: null })}
                        title="Detalles del Pago"
                        size="lg"
                    >
                        {modalDetallePago.pago && (
                            <div className="space-y-6">
                                {/* Información del miembro */}
                                <div className="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-2xl p-6">
                                    <div className="flex items-center gap-4 mb-4">
                                        <div className="w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold text-xl">
                                            {modalDetallePago.pago.miembro.charAt(0)}
                                        </div>
                                        <div>
                                            <h3 className="text-2xl font-bold text-gray-900">{modalDetallePago.pago.miembro}</h3>
                                            <p className="text-gray-600">{modalDetallePago.pago.email}</p>
                                        </div>
                                    </div>
                                </div>
                                
                                {/* Detalles del pago */}
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div className="space-y-4">
                                        <div className="bg-white rounded-xl p-4 border border-gray-200">
                                            <h4 className="font-semibold text-gray-700 mb-2">Información del Pago</h4>
                                            <div className="space-y-2">
                                                <div className="flex justify-between">
                                                    <span className="text-gray-600">ID:</span>
                                                    <span className="font-mono text-sm">{modalDetallePago.pago.id}</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-gray-600">Monto:</span>
                                                    <span className="font-bold text-lg">${modalDetallePago.pago.monto.toFixed(2)}</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-gray-600">Fecha:</span>
                                                    <span>{modalDetallePago.pago.fecha}</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-gray-600">Método:</span>
                                                    <span className="capitalize">{modalDetallePago.pago.metodo}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="space-y-4">
                                        <div className="bg-white rounded-xl p-4 border border-gray-200">
                                            <h4 className="font-semibold text-gray-700 mb-2">Estado y Membresía</h4>
                                            <div className="space-y-2">
                                                <div className="flex justify-between items-center">
                                                    <span className="text-gray-600">Estado:</span>
                                                    <div className={`px-3 py-1 bg-gradient-to-r ${getEstadoColor(modalDetallePago.pago.estado)} text-white text-xs font-bold rounded-full flex items-center gap-1`}>
                                                        {getEstadoIcon(modalDetallePago.pago.estado)}
                                                        {modalDetallePago.pago.estado.toUpperCase()}
                                                    </div>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span className="text-gray-600">Membresía:</span>
                                                    <span className="font-semibold">{modalDetallePago.pago.membresia}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                {/* Acciones rápidas */}
                                <div className="bg-gray-50 rounded-xl p-4">
                                    <h4 className="font-semibold text-gray-700 mb-3">Acciones Rápidas</h4>
                                    <div className="flex gap-2 flex-wrap">
                                        <button
                                            onClick={() => {
                                                if (modalDetallePago.pago) {
                                                    setModalDetallePago({ isOpen: false, pago: null });
                                                    handleAccionPago('reenviar_factura', modalDetallePago.pago);
                                                }
                                            }}
                                            className="px-3 py-2 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 transition-colors flex items-center gap-1"
                                        >
                                            <Send className="w-4 h-4" />
                                            Reenviar Factura
                                        </button>
                                        <button
                                            onClick={() => {
                                                if (modalDetallePago.pago) {
                                                    setModalDetallePago({ isOpen: false, pago: null });
                                                    handleAccionPago('marcar_pagado', modalDetallePago.pago);
                                                }
                                            }}
                                            className="px-3 py-2 bg-green-500 text-white rounded-lg text-sm hover:bg-green-600 transition-colors flex items-center gap-1"
                                        >
                                            <CheckCircle className="w-4 h-4" />
                                            Marcar como Pagado
                                        </button>
                                        <button
                                            onClick={() => {
                                                if (modalDetallePago.pago) {
                                                    setModalDetallePago({ isOpen: false, pago: null });
                                                    handleAccionPago('reembolsar', modalDetallePago.pago);
                                                }
                                            }}
                                            className="px-3 py-2 bg-orange-500 text-white rounded-lg text-sm hover:bg-orange-600 transition-colors flex items-center gap-1"
                                        >
                                            <RefreshCw className="w-4 h-4" />
                                            Procesar Reembolso
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </Modal>
                    
                    {/* Modal de Acciones */}
                    <Modal
                        isOpen={modalAcciones.isOpen}
                        onClose={() => setModalAcciones({ isOpen: false, pago: null })}
                        title="Acciones Disponibles"
                        size="md"
                    >
                        {modalAcciones.pago && (
                            <div className="space-y-4">
                                <div className="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4 mb-6">
                                    <h3 className="font-bold text-gray-900">{modalAcciones.pago.miembro}</h3>
                                    <p className="text-gray-600">${modalAcciones.pago.monto.toFixed(2)} - {modalAcciones.pago.membresia}</p>
                                </div>
                                
                                <div className="grid grid-cols-1 gap-3">
                                    <button
                                        onClick={() => handleAccionPago('reenviar_factura', modalAcciones.pago)}
                                        className="flex items-center gap-3 p-4 bg-blue-50 hover:bg-blue-100 rounded-xl transition-colors text-left"
                                    >
                                        <Send className="w-5 h-5 text-blue-600" />
                                        <div>
                                            <p className="font-semibold text-gray-900">Reenviar Factura</p>
                                            <p className="text-sm text-gray-600">Enviar factura por email</p>
                                        </div>
                                    </button>
                                    
                                    <button
                                        onClick={() => handleAccionPago('marcar_pagado', modalAcciones.pago)}
                                        className="flex items-center gap-3 p-4 bg-green-50 hover:bg-green-100 rounded-xl transition-colors text-left"
                                    >
                                        <CheckCircle className="w-5 h-5 text-green-600" />
                                        <div>
                                            <p className="font-semibold text-gray-900">Marcar como Pagado</p>
                                            <p className="text-sm text-gray-600">Confirmar pago recibido</p>
                                        </div>
                                    </button>
                                    
                                    <button
                                        onClick={() => handleAccionPago('reembolsar', modalAcciones.pago)}
                                        className="flex items-center gap-3 p-4 bg-orange-50 hover:bg-orange-100 rounded-xl transition-colors text-left"
                                    >
                                        <RefreshCw className="w-5 h-5 text-orange-600" />
                                        <div>
                                            <p className="font-semibold text-gray-900">Procesar Reembolso</p>
                                            <p className="text-sm text-gray-600">Devolver el pago al cliente</p>
                                        </div>
                                    </button>
                                    
                                    <button
                                        onClick={() => handleAccionPago('eliminar', modalAcciones.pago)}
                                        className="flex items-center gap-3 p-4 bg-red-50 hover:bg-red-100 rounded-xl transition-colors text-left"
                                    >
                                        <Trash2 className="w-5 h-5 text-red-600" />
                                        <div>
                                            <p className="font-semibold text-gray-900">Eliminar Pago</p>
                                            <p className="text-sm text-gray-600">Eliminar registro permanentemente</p>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        )}
                    </Modal>
                    
                    {/* Modal de Confirmación */}
                    <ConfirmationModal
                        isOpen={modalConfirmacion.isOpen}
                        onClose={() => setModalConfirmacion({ isOpen: false, action: '', pago: null })}
                        onConfirm={confirmarAccion}
                        title={getAccionTexto(modalConfirmacion.action)}
                        message={modalConfirmacion.pago ? getAccionMensaje(modalConfirmacion.action, modalConfirmacion.pago) : ''}
                        confirmText={getAccionTexto(modalConfirmacion.action)}
                        type={modalConfirmacion.action === 'eliminar' ? 'danger' : 'warning'}
                        isLoading={isLoading}
                    />
                </div>
            );
        };
        
        // Renderizar la aplicación
        const root = createRoot(document.getElementById('root'));
        root.render(
            <div>
                <PagosMembresiPage />
                <Toaster
                    position="top-right"
                    toastOptions={{
                        duration: 4000,
                        style: {
                            background: '#1e293b',
                            color: '#fff',
                            border: '1px solid #334155',
                            borderRadius: '12px',
                        },
                        success: {
                            iconTheme: {
                                primary: '#10b981',
                                secondary: '#fff',
                            },
                        },
                        error: {
                            iconTheme: {
                                primary: '#ef4444',
                                secondary: '#fff',
                            },
                        },
                        loading: {
                            iconTheme: {
                                primary: '#f59e0b',
                                secondary: '#fff',
                            },
                        },
                    }}
                />
            </div>
        );
    </script>
</body>
</html>
